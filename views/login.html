
<div >
    <% if(typeof(error) !== 'undefined' && error){ %>
    <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">&times;</a>
        <strong><%= error %></strong>
    </div>
    <% } %>
    <div class="form-login">


    <form id='signin_form' action='/login' method='post'>
        <div>
            <labelfor='name'>用户名</label>

            <div>
                <input id='name' name='name' size='30' type='text'/>
            </div>
        </div>
        <div>
            <label for='pass'>密码</label>

            <div >
                <input id='pass' name='pass' size='30' type='password'/>
            </div>
        </div>
        <div class="validate-img">
            <label for='valida_img'>验证码</label>
            <input class="img-value" name="valida_img" type="text"/>
            <img src="<%= imgdata %>" />
        </div>

        <div>
            <input type='submit' value='登录'/>
        </div>
    </form>
    </div>
</div>
<script type="text/javascript">
    $('.validate-img img').click(function (e) {
        var $this = $(this);
        $.ajax({
            url:'/login/validate_img',
            method:'post'
        }).done(function (data) {
            $this.attr('src',data.imgdata);
        }).fail(function (xhr) {
            if (xhr.status === 403) {
                alert('服务器错误。');
            }
        });
    });
</script>